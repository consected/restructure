<div class="reports-index">
  <div class="data-results col-md-offset-1 col-md-22 col-lg-offset-2 col-lg-20" data-subscription="admin-list" >
    <div data-result="admin-list">
  <h1><%= app_config_text :reports_list_title, 'Reports' %></h1>
  <% 
    @shown_filter_break = true 
    num_cats = @reports.pluck(:category).uniq.length
  %>
  <%= show_filters unless num_cats <= 1 %>

  <div id="admin-edit-" data-preprocessor="admin-edit-form" data-subscription="admin-edit-form-" class="new-block new-below"></div>

  <table class="table tablesorter admin-list">
    <thead>
      <tr>
        <th></th>
        <th>Name</th>
        <th>Description</th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% @reports.each do |list_item| %>
        <tr class="<%=list_item.disabled ? 'disabled-result' : ''%> report-type-<%= list_item.report_type %> <%= list_item.auto ? 'report-auto' : '' %>" data-report-id="<%=list_item.id %>">
          <td style="width: 5%"><span class="hidden"><%= list_item.report_type %></span><span class="glyphicon <%= list_item.report_type == 'count' ? 'glyphicon-record' : list_item.report_type == 'regular_report' ? 'glyphicon-list-alt' : 'glyphicon-search'  %>" title="<%= list_item.report_type.humanize %>"></span></td>

          <td style="width: 15%"><%= link_to  list_item.name, report_path(list_item.id) %></td>

          <td style="width: 30%"><%= markdown_to_html list_item.list_description %></td>
          <td style="width: 25%" class="report-search-attr"></td>
          <td style="width: 25%" class="report-measure"></td>


        </tr>
      <% end %>
    </tbody>
  </table>

    </div>
  </div>
</div>
<script>

  _fpa.reports.run_autos();

</script>
