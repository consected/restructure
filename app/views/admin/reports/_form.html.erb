<%
    url = url_for([:admin, object_instance])
%>
<div class="data-results">
  <div data-result="admin-edit-form-"  class="admin-edit-form admin-report">
<%= form_for(@report, url: url, class: "inline-form", remote: true) do |f| %>
  <%= render partial: 'admin_handler/form_errors' %>
  <div class="row">
    <div class="col-sm-12" style="text-align: left">
      <div class="form-group">
        <%= f.label :name %>
        <%= f.text_field :name %>
      </div>
      <div class="form-group">
        <%= f.label :short_name %>
        <%= f.text_field :short_name %>
      </div>
      <div class="form-group">
        <%= f.label :category %>
        <%= f.text_field :item_type %>
      </div>
      <div class="form-group">
        <%= f.label :report_type %>
        <%= f.select :report_type, Report::ReportTypes, include_blank: '-select-' %>
      </div>

      <div class="form-group">
        <%= f.label :position %>
        <%= f.text_field :position, type: :number%>
      </div>
        <br/>
      <div class="form-group">
        <%= f.check_box :auto %>
        <%= f.label :run_automatically %>
      </div>
      <div class="form-group">
        <%= f.check_box :searchable %>
        <%= f.label :searchable %>
      </div>
      <div class="form-group">
        <%= f.check_box :disabled %>
        <%= f.label :disable %>
      </div>
      <p><a href="#edit_table_block" class="collapsed" data-toggle="collapse">Edit table data?</a>  </p>
      <div class="collapse" id="edit_table_block">
        <div class="help-block">
          <p>Entering a edit table name enables data editing for this report. Users authorized to edit report data can edit rows in a report, when viewed as a table.</p>
        </div>
        <div class="form-group">
          <%= f.label :table_name, 'data-add-icon' => 'info-sign', title: 'To allow a report\'s data to be editable, enter the table name to be edited. Note: the first column in the report will be used as the identifier for the table row.' %>
          <%= f.text_field :edit_model%>
        </div>
        <div class="form-group">
          <%= f.label :editable_field_names, 'data-add-icon' => 'info-sign', title: 'Comma or space separated list of field names to make available for editing' %>
          <%= f.text_field :edit_field_names%>
        </div>
        <div class="form-group">
          <%= f.label :fields_to_display_as_selection_drop_down, 'data-add-icon' => 'info-sign', title: 'The names of any fields that should be entered with a drop down (defined in General Selections)' %>
          <%= f.text_field :selection_fields%>
        </div>
      </div>
      <div>
        <%= f.label :description %>
        <%= f.text_area :description,  style: "width: 99%; height: 70px;" %>
      </div>
      <div class="form-group" data-out-attr-name="options" data-out-object-name="<%= object_instance.class.name.ns_underscore %>">
        <label>options</label>
        <div style="width: 800px; height: 20vh;">
          <%= f.text_area :options, class: "code-editor code-editor-#{editor_code_type}", data: {code_editor_type: 'yaml'}%>
        </div>
      </div>
      <div class="">
        <%= f.label :sql %>
        <div style="width: 99%; height: 60vh;">
          <%= f.text_area :sql, style: "width: 99%; height: 270px; font-family: monospace;", class: "code-editor code-editor-#{editor_code_type}", data: {code_editor_type: editor_code_type} %>
        </div>
      </div>
      <p>
        <%= f.submit class: "btn btn-primary" %> <%= link_to 'test report in new window', @report, target: 'testreport' %>
      </p>

      <%= render partial: 'search_attr_definer', locals: {f: f} %>

    </div>
    <%= render partial: 'reference_data_info_block', locals: {f: f} %>
  </div>
      <p>&nbsp;</p>


  <div class="form-group">
    <%= hidden_filter_fields %>
    <%= f.submit class: "btn btn-primary" %> <%= admin_edit_cancel %>
  </div>
<% end %>
  </div>
</div>
<script>

</script>
