<div class="data-results" data-subscription="admin-list" >
  <div data-result="admin-list">
  <h1><%=human_name%></h1>

  <p>
    <%= show_filters %>
  </p>

  <div id="admin-edit-" data-preprocessor="admin-edit-form" data-subscription="admin-edit-form-" class="new-block new-below"></div>

  <table class="table tablesorter admin-list">
    <thead>
      <tr>
        <th class="no-sort"></th>
        <% index_params.each do |p| %>
          <th><%= p.to_s.humanize %></th>
        <% end %>
        
      </tr>
    </thead>

    <tbody>
      <% objects_instance.each do |list_item| %>
        <tr class="<%=list_item.disabled ? 'disabled-result' : ''%>">
          <td><%= admin_edit_btn list_item.id%> </td>
          <% index_params.each do |p|
              test_assoc = p.to_s.gsub('_id','')
              test_assoc_ids = p.to_s.gsub('_ids','').pluralize

              test_assoc_ids = nil if test_assoc_ids == p.to_s
              test_assoc = nil if test_assoc_ids == test_assoc || test_assoc == p.to_s
          %>

          <% if test_assoc && list_item.respond_to?(test_assoc) %>
            <td><%= list_item.send(test_assoc).to_s %></td>
          <% elsif test_assoc_ids && list_item.respond_to?(test_assoc_ids) %>
            <td><%= list_item.send(test_assoc_ids).map(&:to_s).join("; ") %></td>
          <% else %>
            <td><%= list_item.send(p) %></td>
          <% end %>
        <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="container">
    <%= @help_description %>
  </div>


  <%=  render partial: 'admin_handler/index_actions'  %>
  </div>
</div>
