<%
fopt = field_options_for(form_object_instance, field_name_sym)

alt_options = fopt[:edit_as] && fopt[:edit_as][:alt_options]
opt = {}
begin
  data = form_object_instance[field_name_sym.to_s]&.to_h || {}
  gs = YAML.dump(data).gsub(/^---.*\n/, '')
rescue StandardError
  gs = form_object_instance[field_name_sym.to_s]
end

options = field_options_for(form_object_instance, field_name_sym)
options[:include_blank] = true unless options.has_key?(:include_blank)

html_options = {
  data: {attr_name: field_name_sym, object_name: form_object_item_type_us}, code_editor_type: 'yaml',
  class: "code-editor code-editor-yaml",
  
}
%>
<%= form.label field_name_sym, label_for(field_name_sym, labels), opt %>
<%= text_area_tag "#{form_object_item_type_us.gsub('__','_')}[#{field_name_sym}][]", gs, html_options %>
