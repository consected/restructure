{
  "app_type": {
    "id": 3,
    "name": "persnet",
    "label": "Personal Networks",
    "disabled": null,
    "admin_id": 2,
    "app_configurations": [
      {
        "id": 12,
        "name": "hide pro info",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 13,
        "name": "hide player tabs",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 14,
        "name": "hide search form advanced",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 15,
        "name": "hide search form searchable reports",
        "value": "false",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 16,
        "name": "user session timeout",
        "value": "30",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 17,
        "name": "hide navbar search",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 18,
        "name": "hide tracker panel",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 19,
        "name": "hide player accuracy",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 20,
        "name": "notes field caption",
        "value": "",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 21,
        "name": "default search form",
        "value": "responses needed",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 22,
        "name": "show activity log panel",
        "value": "persnet_assignment",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 23,
        "name": "hide search form simple",
        "value": "true",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 24,
        "name": "show ids in master result",
        "value": "persnet_id",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 25,
        "name": "create master with",
        "value": "persnet_assignment",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 26,
        "name": "hide player tabs",
        "value": "false",
        "disabled": false,
        "admin_id": 2,
        "user_id": 1,
        "app_type_id": 3,
        "role_name": null,
        "user_email": "phil_ayres@hms.harvard.edu"
      },
      {
        "id": 27,
        "name": "menu create master record label",
        "value": "Create Subject Record",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 28,
        "name": "menu research label",
        "value": "Home",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 29,
        "name": "heading create master record label",
        "value": "Create New Subject Record with PersNet ID",
        "disabled": false,
        "admin_id": 2,
        "user_id": null,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      }
    ],
    "user_access_controls": [
      {
        "id": 87,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "player_infos",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 88,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "pro_infos",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 89,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "player_contacts",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 90,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "addresses",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 91,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "trackers",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 92,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "tracker_histories",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 93,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "latest_tracker_history",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 94,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__containers",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - files",
        "user_email": null
      },
      {
        "id": 95,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__stored_files",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - files",
        "user_email": null
      },
      {
        "id": 96,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__archived_files",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - files",
        "user_email": null
      },
      {
        "id": 97,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__stored_files_item_flags",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 98,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__archived_files_item_flags",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 99,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "player_infos_item_flags",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 100,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "activity_log__player_contact_phones",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 101,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "activity_log__ipa_assignment_session_filestores",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 102,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "general_infos",
        "options": null,
        "access": "create",
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 103,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "not_tracker_histories",
        "options": null,
        "access": "create",
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 104,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "not_trackers",
        "options": null,
        "access": "create",
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 105,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "sage_assignments",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 106,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "ipa_assignments",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 107,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "scantrons",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 108,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "bhs_assignments",
        "options": null,
        "access": null,
        "disabled": null,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 109,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "item_flags",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 112,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "persnet_assignments",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 115,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "activity_log__persnet_assignments",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 116,
        "user_id": null,
        "resource_type": "general",
        "resource_name": "app_type",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "sync-upload",
        "user_email": null
      },
      {
        "id": 117,
        "user_id": null,
        "resource_type": "external_id_assignments",
        "resource_name": "persnet_assignments",
        "options": "",
        "access": "limited",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": null,
        "user_email": null
      },
      {
        "id": 118,
        "user_id": null,
        "resource_type": "report",
        "resource_name": "Responses Needed",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 119,
        "user_id": null,
        "resource_type": "report",
        "resource_name": "Search PersNet Subject",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 120,
        "user_id": null,
        "resource_type": "report",
        "resource_name": "Responses Completed",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 121,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__primary",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 122,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__contact_initiator",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 123,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__blank_log",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 124,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__respond_to_pi",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 125,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__blank_log",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "pi",
        "user_email": null
      },
      {
        "id": 126,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__contact_initiator",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "pi",
        "user_email": null
      },
      {
        "id": 127,
        "user_id": null,
        "resource_type": "general",
        "resource_name": "app_type",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 129,
        "user_id": null,
        "resource_type": "general",
        "resource_name": "create_master",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "ra",
        "user_email": null
      },
      {
        "id": 130,
        "user_id": null,
        "resource_type": "report",
        "resource_name": "PersNet Subjects Pending Sync",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "ra",
        "user_email": null
      },
      {
        "id": 131,
        "user_id": null,
        "resource_type": "report",
        "resource_name": "Contact from PI",
        "options": "",
        "access": "read",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "ra",
        "user_email": null
      },
      {
        "id": 132,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__respond_to_pi",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "ra",
        "user_email": null
      },
      {
        "id": 133,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__primary",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "ra",
        "user_email": null
      },
      {
        "id": 134,
        "user_id": null,
        "resource_type": "activity_log_type",
        "resource_name": "activity_log__persnet_assignment__close_case",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_email": null
      },
      {
        "id": 135,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__containers",
        "options": "",
        "access": "update",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "sync-upload",
        "user_email": null
      },
      {
        "id": 136,
        "user_id": null,
        "resource_type": "table",
        "resource_name": "nfs_store__manage__stored_files",
        "options": "",
        "access": "create",
        "disabled": false,
        "admin_id": 2,
        "app_type_id": 3,
        "role_name": "sync-upload",
        "user_email": null
      }
    ],
    "associated_activity_logs": [
      {
        "id": 4,
        "name": "PersNet Tracker",
        "item_type": "persnet_assignment",
        "rec_type": "",
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:51.526Z",
        "updated_at": "2018-09-18T09:29:25.765Z",
        "action_when_attribute": "created_at",
        "field_list": "select_record_from_player_contact_phones, return_call_availability_notes, questions_from_call_notes, completed_q1_no_yes, completed_teamstudy_no_yes, previous_contact_with_team_no_yes, previous_contact_with_team_notes",
        "blank_log_field_list": "select_result, pi_return_call_notes",
        "blank_log_name": "PI Notes",
        "extra_log_types": "primary:\r\n  label: Info Request\r\n  caption_before:\r\n    select_record_from_player_contact_phones: The primary phone number will be entered when the subject's record is sync'd\r\n#    results_link: The testmybrain.org URL will be entered after this record is saved\r\n    return_call_availability_notes: Return call availability\r\n    questions_from_call_notes: Questions from call and items to address\r\n    previous_contact_with_team_notes: Notes about previous contact with team\r\n\r\n  save_trigger:\r\n    on_create:\r\n      create_filestore_container: \r\n        name: persnet document\r\n        label: PersNet Document\r\n        create_with_role: nfs_store group 601\r\n\r\n  references:\r\n    nfs_store__manage__container:\r\n      from: this\r\n      add: one_to_this\r\n      view_as:\r\n        edit: hide\r\n        show: filestore\r\n        new: not_embedded\r\n\r\n\r\nblank_log:\r\n  label: PI Notes\r\n  caption_before:\r\n    select_result: Select 'Complete' if no additional action is required, or 'In Progress' if this item should remain in the 'Responses Needed' queue.\r\n    pi_return_call_notes: Notes from call with the participant. Please also include the date and time contacted if not now.\r\n\r\ncontact_initiator:\r\n  label: Contact Staff Member\r\n  save_action:\r\n    label: Send\r\n  fields:\r\n    - notes\r\n  caption_before:\r\n    all_fields: Send a message to the user that originally created the request. The user will be notified that there is a message to review.\r\n\r\nrespond_to_pi:\r\n  label: Respond to PI\r\n  save_action:\r\n    label: Send\r\n  fields:\r\n    - notes\r\n  caption_before:\r\n    all_fields: Reply to a message from a user that sent a contact message. The user will be notified that there is a message to review.\r\n\r\nclose_case:\r\n  label: Close Case\r\n  save_action:\r\n    label: Close Case\r\n  fields:\r\n    - notes\r\n  caption_before:\r\n    all_fields: Click 'Close Case' to mark this inquiry and chain of messages as complete and remove it from the 'Responses Needed' queue. It can be reopened in the future by searching for the subject and creating the appropriate request.\r\n",
        "hide_item_list_panel": true,
        "main_log_name": "Info Request",
        "process_name": "",
        "table_name": "activity_log_persnet_assignments",
        "user_email": null
      }
    ],
    "associated_dynamic_models": [

    ],
    "associated_external_identifiers": [
      {
        "id": 5,
        "name": "persnet_assignments",
        "label": "PersNet ID",
        "external_id_attribute": "persnet_id",
        "external_id_view_formatter": "",
        "external_id_edit_pattern": "",
        "prevent_edit": false,
        "pregenerate_ids": false,
        "min_id": 0,
        "max_id": 999999999,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:51.024Z",
        "updated_at": "2018-09-14T12:42:51.024Z",
        "alphanumeric": false,
        "user_email": null
      }
    ],
    "associated_reports": [
      {
        "id": 15,
        "name": "Responses Needed",
        "description": "Shows records requiring response from the PI.",
        "sql": "SELECT \r\ndt.id,\r\ndt.select_record_from_player_contact_phones ,\r\ndt.return_call_availability_notes,\r\ndt.questions_from_call_notes,\r\ndt.results_link,\r\ndt.select_result,\r\ndt.pi_return_call_notes,\r\ndt.master_id\r\n\r\nFROM (\r\n SELECT id,\r\n   master_id, persnet_assignment_id, created_at, select_result,\r\n   select_record_from_player_contact_phones ,\r\n   return_call_availability_notes,\r\n   questions_from_call_notes,\r\n   results_link,\r\n   pi_return_call_notes,\r\n   extra_log_type,\r\n   rank()\r\n OVER (\r\n  PARTITION BY master_id \r\n  ORDER BY created_at DESC\r\n ) AS r\r\n FROM activity_log_persnet_assignments\r\n\r\n) AS dt\r\n\r\ninner join player_infos pi on dt.master_id = pi.master_id\r\n\r\nWHERE\r\n  r = 1\r\nAND\r\n(  dt.select_result IS NULL or dt.select_result <> 'complete' ) \r\nAND  dt.extra_log_type <> 'close_case'\r\n\r\n\r\nORDER BY\r\n  dt.id DESC\r\n;\r\n",
        "search_attrs": "",
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.388Z",
        "updated_at": "2018-09-14T12:42:52.388Z",
        "report_type": "search",
        "auto": true,
        "searchable": true,
        "position": 0,
        "edit_model": "",
        "edit_field_names": "",
        "selection_fields": "",
        "item_type": "PersNet Search",
        "user_email": null
      },
      {
        "id": 16,
        "name": "Responses Completed",
        "description": "Shows records with completed response from the PI.",
        "sql": "SELECT \r\ndt.id,\r\ndt.select_record_from_player_contact_phones ,\r\ndt.return_call_availability_notes,\r\ndt.questions_from_call_notes,\r\ndt.results_link,\r\ndt.select_result,\r\ndt.pi_return_call_notes,\r\ndt.master_id\r\n\r\nFROM (\r\n SELECT id,\r\n   master_id, persnet_assignment_id, created_at, select_result,\r\n   select_record_from_player_contact_phones ,\r\n   return_call_availability_notes,\r\n   questions_from_call_notes,\r\n   results_link,\r\n   pi_return_call_notes,\r\n   extra_log_type,\r\n   rank()\r\n OVER (\r\n  PARTITION BY master_id \r\n  ORDER BY created_at DESC\r\n ) AS r\r\n FROM activity_log_persnet_assignments\r\n\r\n) AS dt\r\nWHERE\r\n  r = 1\r\nAND\r\n( dt.select_result = 'complete' or dt.extra_log_type = 'close_case')\r\n\r\n\r\nORDER BY\r\n  created_at DESC\r\n;\r\n",
        "search_attrs": "",
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.395Z",
        "updated_at": "2018-09-14T12:42:52.395Z",
        "report_type": "search",
        "auto": true,
        "searchable": true,
        "position": 1,
        "edit_model": "",
        "edit_field_names": "",
        "selection_fields": "",
        "item_type": "PersNet Search",
        "user_email": null
      },
      {
        "id": 17,
        "name": "Contact from PI",
        "description": "Shows contact messages from the PI that require an RA to respond.",
        "sql": "SELECT \r\ndt.id,\r\ndt.select_record_from_player_contact_phones ,\r\ndt.return_call_availability_notes,\r\ndt.questions_from_call_notes,\r\ndt.results_link,\r\ndt.select_result,\r\ndt.pi_return_call_notes,\r\ndt.master_id,\r\ndt.extra_log_type\r\n\r\nFROM (\r\n SELECT id,\r\n   master_id, persnet_assignment_id, created_at, select_result,\r\n   select_record_from_player_contact_phones ,\r\n   return_call_availability_notes,\r\n   questions_from_call_notes,\r\n   results_link,\r\n   pi_return_call_notes, extra_log_type,\r\n   rank()\r\n OVER (\r\n  PARTITION BY master_id \r\n  ORDER BY created_at DESC\r\n ) AS r\r\n FROM activity_log_persnet_assignments\r\n WHERE extra_log_type IN ('respond_to_pi', 'contact_initiator', 'close_case')\r\n) AS dt\r\n\r\ninner join player_infos pi on dt.master_id = pi.master_id\r\nWHERE\r\n  r >= 1 AND dt.extra_log_type = 'contact_initiator'\r\nAND\r\n  r = 1 AND (dt.extra_log_type <> 'respond_to_pi' AND dt.extra_log_type <> 'close_case')\r\n\r\nORDER BY\r\n  dt.created_at DESC\r\n;\r\n",
        "search_attrs": "",
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.403Z",
        "updated_at": "2018-09-14T12:42:52.403Z",
        "report_type": "search",
        "auto": true,
        "searchable": true,
        "position": 300,
        "edit_model": "",
        "edit_field_names": "",
        "selection_fields": "",
        "item_type": "PersNet Search",
        "user_email": null
      },
      {
        "id": 18,
        "name": "PersNet Subjects Pending Sync",
        "description": "Show PersNet subjects that have been created here, but have not yet been transferred from Zeus.",
        "sql": "select b.master_id from persnet_assignments b\r\nleft join player_infos pi\r\non b.master_id = pi.master_id\r\nwhere pi.id is null\r\n;",
        "search_attrs": "",
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.408Z",
        "updated_at": "2018-09-14T12:42:52.408Z",
        "report_type": "search",
        "auto": true,
        "searchable": true,
        "position": 200,
        "edit_model": "",
        "edit_field_names": "",
        "selection_fields": "",
        "item_type": "PersNet Search",
        "user_email": null
      },
      {
        "id": 19,
        "name": "Search PersNet Subject",
        "description": "Search players by name, phone, email or ID.\r\nLeave the search field empty to see all subjects.",
        "sql": "select distinct m.id master_id, b.persnet_id,\r\npi.first_name, pi.middle_name, pi.last_name, pi.nick_name,\r\na.street, a.street2, a.city, a.state, a.zip, \r\npc.data, pc.rec_type\r\nfrom masters m\r\nleft join player_infos pi\r\non pi.master_id = m.id \r\ninner join persnet_assignments b\r\non m.id = b.master_id\r\nleft join addresses a\r\non m.id = a.master_id\r\nleft join player_contacts pc\r\non pc.master_id = m.id\r\nwhere \r\n(\r\n  :name is null \r\n  or pi.first_name ~* :name\r\n  or pi.last_name ~* :name\r\n  or pi.middle_name ~* :name\r\n  or pi.nick_name ~* :name\r\n  or( \r\n    pi.first_name ~* coalesce(split_part(:name, ' ', 1),'none')\r\n    AND pi.last_name ~* coalesce(split_part(:name, ' ', 2),'none')\r\n  )\r\n) \r\nOR\r\n(\r\n  regexp_replace(pc.data, '\\W+', '', 'g') ~* regexp_replace(:name, '\\W+', '', 'g')\r\n) \r\nOR\r\n(\r\n  :name is not null and\r\n  b.persnet_id::varchar  = regexp_replace(:name, '[^0-9]*', '', 'g')\r\n)\r\n",
        "search_attrs": "name: \r\n  text: \r\n    all: true\r\n    multiple: single\r\n",
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.413Z",
        "updated_at": "2018-09-14T12:42:52.413Z",
        "report_type": "search",
        "auto": false,
        "searchable": true,
        "position": 10,
        "edit_model": "",
        "edit_field_names": "",
        "selection_fields": "",
        "item_type": "PersNet Search",
        "user_email": null
      }
    ],
    "associated_general_selections": [
    ],
    "page_layouts": [

    ],
    "user_roles": [
      {
        "id": 9,
        "app_type_id": 3,
        "role_name": "ra",
        "user_id": 1,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.437Z",
        "updated_at": "2018-09-14T12:42:52.437Z",
        "user_email": "phil_ayres@hms.harvard.edu"
      },
      {
        "id": 10,
        "app_type_id": 3,
        "role_name": "pi",
        "user_id": 1,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:42:52.450Z",
        "updated_at": "2018-09-14T12:42:52.450Z",
        "user_email": "phil_ayres@hms.harvard.edu"
      },
      {
        "id": 11,
        "app_type_id": 3,
        "role_name": "nfs_store group 601",
        "user_id": 1,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:49:16.217Z",
        "updated_at": "2018-09-14T12:53:32.966Z",
        "user_email": "phil_ayres@hms.harvard.edu"
      },
      {
        "id": 12,
        "app_type_id": 3,
        "role_name": "user - files",
        "user_id": 1,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T12:53:06.460Z",
        "updated_at": "2018-09-14T12:53:06.460Z",
        "user_email": "phil_ayres@hms.harvard.edu"
      },
      {
        "id": 13,
        "app_type_id": 3,
        "role_name": "nfs_store group 601",
        "user_id": 3,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T13:31:24.388Z",
        "updated_at": "2018-09-14T13:31:24.388Z",
        "user_email": "sync_service_file_upload_client@app.fphs2.harvard.edu"
      },
      {
        "id": 14,
        "app_type_id": 3,
        "role_name": "sync-upload",
        "user_id": 3,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T13:31:42.616Z",
        "updated_at": "2018-09-14T13:31:42.616Z",
        "user_email": "sync_service_file_upload_client@app.fphs2.harvard.edu"
      },
      {
        "id": 15,
        "app_type_id": 3,
        "role_name": "user - persnet",
        "user_id": 1,
        "admin_id": 2,
        "disabled": false,
        "created_at": "2018-09-14T13:48:49.651Z",
        "updated_at": "2018-09-14T13:48:49.651Z",
        "user_email": "phil_ayres@hms.harvard.edu"
      }
    ],
    "associated_message_templates": [

    ],
    "associated_protocols": [

    ],
    "associated_sub_processes": [

    ],
    "associated_protocol_events": [

    ],
    "user_email": null
  }
}
