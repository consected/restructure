# @library sleep field_options

default:

  caption_before:
    alcohol_frequency: How often do you have a drink containing alcohol?
    daily_alcohol: How many standard drinks containing alcohol do you have on a typical day?
    six_or_more_frequency: How often do you have six or more drinks on one occasion?
    total_score: Score
    placeholder_possibly_eligible: |
      *Based on the scores, the participant is ineligible.
      The option to change status to possibly eligible will appear at the next step.*

    possibly_eligible_reason_notes: Reason

  field_options:
    <<: *ps_field_options

    total_score:
      edit_as:
        field_type: fixed_score
      calculate_with:
        sum:
          - alcohol_frequency
          - daily_alcohol
          - six_or_more_frequency


  editable_if:
    always: true

  show_if:
    daily_alcohol:
      all:
        alcohol_frequency:
          - 2
          - 3
          - 4

    six_or_more_frequency:
      any:
        six_or_more_frequency: ''
      all:
        alcohol_frequency:
          - 2
          - 3
          - 4
        total_score:
          - 0
          - 1
          - 2
          - 3
          - 4
          - 5


    possibly_eligible_yes_no:
      never: true

    possibly_eligible_reason_notes:
      never: true

#    possibly_eligible_yes_no: &ineligible_rules
    # we are ineligible (or possibly eligible if)
    placeholder_possibly_eligible:

      not_all:
        total_score:
          - 0
          - 1
          - 2
          - 3
          - 4
          - 5
        six_or_more_frequency:
          - ''
          - 0
          - 1
          - 2
          - 3


#    placeholder_possibly_eligible:
#      all:
#        possibly_eligible_yes_no: 'yes'
#      <<: *ineligible_rules
